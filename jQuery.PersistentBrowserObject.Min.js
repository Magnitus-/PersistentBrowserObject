//Copyright (c) 2014 Eric Vallee <eric_vallee2003@yahoo.ca>
//MIT License: https://raw.githubusercontent.com/Magnitus-/PersistentBrowserObject/master/License.txt
(function(){function a(c,e,b){a.prototype.GetInstance||(a.prototype.GetCacheType=function(){return this.CacheType},a.prototype.GetInstance=function(){return this.CacheType===a.Cache.Instance?(this.InstanceCache||(this.InstanceCache=this.Retrieve(this.Identifier+"Object")),this.InstanceCache):this.CacheType===a.Cache.Shared?(d[this.Identifier]||(d[this.Identifier]=this.Retrieve(this.Identifier+"Object")),d[this.Identifier]):this.Retrieve(this.Identifier+"Object")},a.prototype.Get=function(a){return this.GetInstance()[a]}, a.prototype.Set=function(a,d){var c=this.GetInstance(),b;if(a&&d)c[a]=d;else if("object"===typeof a)for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);else throw new TypeError("PersistentBrowserObject: Invalid parameters passed to Set accessor. Either pass a single Key:Value pair as separate arguments or an object containing the Key:Value pairs you want to assign.");this.Store(this.Identifier+"Object",c)},a.prototype.Delete=function(a){var d=this.GetInstance();delete d[a];this.Store(this.Identifier+"Object", d)});this.Identifier=c;void 0!==b&&(this.FallbackList=b);this.CacheType=void 0===e?a.Cache.None:e;this.InstanceCache=null;this.Exists(this.Identifier+"Object")||this.Store(this.Identifier+"Object",{});this.CacheType!=a.Cache.Instance&&this.CacheType!=a.Cache.Shared||this.GetInstance()}function b(){var a;for(a=0;a<this.FallbackList.length;a++)if(this.FallbackList[a].Supported())return this.FallbackList[a][arguments[0]].apply(this,Array.prototype.slice.call(arguments,1))}var d={};a.Cache={None:0,Instance:1, Shared:2};a.CleanSharedCache=function(a){a?delete d[a]:d={}};a.prototype.FallbackList=[];a.prototype.Store=function(a,d){b.call(this,"Store",a,d)};a.prototype.Retrieve=function(a){return b.call(this,"Retrieve",a)};a.prototype.Exists=function(a){return b.call(this,"Exists",a)};void 0===window.jQuery?window.PersistentBrowserObject=a:window.jQuery.PersistentBrowserObject=a})(); (function(){var a;a=void 0===window.jQuery?window.PersistentBrowserObject:jQuery.PersistentBrowserObject;a.Storage={};a.Storage.localStorage={};a.Storage.localStorage.Store=function(a,c){localStorage[a]=JSON.stringify(c)};a.Storage.localStorage.Retrieve=function(a){return JSON.parse(localStorage[a])};a.Storage.localStorage.Exists=function(a){return void 0!==localStorage[a]};a.Storage.localStorage.Supported=function(){return void 0!==window.localStorage};a.Storage.sessionStorage={};a.Storage.sessionStorage.Store= function(a,c){sessionStorage[a]=JSON.stringify(c)};a.Storage.sessionStorage.Retrieve=function(a){return JSON.parse(sessionStorage[a])};a.Storage.sessionStorage.Exists=function(a){return void 0!==sessionStorage[a]};a.Storage.sessionStorage.Supported=function(){return void 0!==window.sessionStorage};var b={};a.Storage.Memory={};a.Storage.Memory.Store=function(a,c){b[a]=JSON.stringify(c)};a.Storage.Memory.Retrieve=function(a){return JSON.parse(b[a])};a.Storage.Memory.Exists=function(a){return void 0!== b[a]};a.Storage.Memory.Supported=function(){return!0};a.Storage.Memory.Clear=function(){};a.Storage.Cookie={};a.Storage.Cookie.Store=function(a,c){document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(JSON.stringify(c))};a.Storage.Cookie.Retrieve=function(a){a=encodeURIComponent(a)+"=";var c=document.cookie.indexOf(a),b=document.cookie.indexOf(";",c);-1==b&&(b=document.cookie.length);return JSON.parse(decodeURIComponent(document.cookie.substring(c+a.length,b)))};a.Storage.Cookie.Exists=function(a){a= encodeURIComponent(a)+"=";return-1<document.cookie.indexOf(a)};a.Storage.Cookie.Supported=function(){return void 0!==document&&void 0!==document.cookie};a.prototype.FallbackList[a.prototype.FallbackList.length]=a.Storage.localStorage})();

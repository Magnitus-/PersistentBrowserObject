//Copyright (c) 2014 Eric Vallee <eric_vallee2003@yahoo.ca>
//MIT License: https://raw.githubusercontent.com/Magnitus-/PersistentBrowserObject/master/License.txt
(function(){function a(a){a=this.Get(a);if(Array.isArray(a))return a;throw new TypeError("PersistentBrowserObject: Tried to do an array operation on a parameter that is not an array.");}function c(b,f,g){c.prototype.GetInstance||(c.prototype.GetCacheType=function(){return this.CacheType},c.prototype.GetInstance=function(){return this.CacheType===c.Cache.Instance?(this.InstanceCache||(this.InstanceCache=this.Retrieve(this.Identifier+"Object")),this.InstanceCache):this.CacheType===c.Cache.Shared?(e[this.Identifier]|| (e[this.Identifier]=this.Retrieve(this.Identifier+"Object")),e[this.Identifier]):this.Retrieve(this.Identifier+"Object")},c.prototype.Get=function(a){return this.GetInstance()[a]},c.prototype.Set=function(a,b){var c=this.GetInstance(),d;if(a&&b)c[a]=b;else if("object"===typeof a)for(d in a)a.hasOwnProperty(d)&&(c[d]=a[d]);else throw new TypeError("PersistentBrowserObject: Invalid parameters passed to Set accessor. Either pass a single Key:Value pair as separate arguments or an object containing the Key:Value pairs you want to assign."); this.Store(this.Identifier+"Object",c)},c.prototype.Delete=function(a){var b=this.GetInstance();delete b[a];this.Store(this.Identifier+"Object",b)},c.prototype.DeleteAll=function(){var a=this.GetInstance(),b;for(b in a)a.hasOwnProperty(b)&&delete a[b];this.Store(this.Identifier+"Object",a)},c.prototype.Push=function(b){var c=a.call(this,b),d=Array.prototype.push.apply(c,Array.prototype.slice.call(arguments,1));this.Set(b,c);return d},c.prototype.Pop=function(b){var c=a.call(this,b),d=c.pop();this.Set(b, c);return d},c.prototype.Shift=function(b){var c=a.call(this,b),d=c.shift();this.Set(b,c);return d},c.prototype.Unshift=function(b,c){var d=a.call(this,b),e=Array.prototype.unshift.apply(d,Array.prototype.slice.call(arguments,1));this.Set(b,d);return e},c.prototype.Length=function(b){return a.call(this,b).length},c.prototype.GetIndex=function(b,c){return a.call(this,b)[c]},c.prototype.EnsureDefined=function(b,a){void 0===this.Get(b)&&this.Set(b,a)});if(this instanceof c)this.Identifier=b,void 0!== g&&(this.FallbackList=g),this.CacheType=void 0===f?c.Cache.None:f,this.InstanceCache=null,this.Exists(this.Identifier+"Object")||this.Store(this.Identifier+"Object",{}),this.CacheType!=c.Cache.Instance&&this.CacheType!=c.Cache.Shared||this.GetInstance();else return new c(b,f,g)}function b(){var b;for(b=0;b<this.FallbackList.length;b++)if(this.FallbackList[b].Supported())return this.FallbackList[b][arguments[0]].apply(this,Array.prototype.slice.call(arguments,1))}var e={};c.Cache={None:0,Instance:1, Shared:2};c.CleanSharedCache=function(b){b?delete e[b]:e={}};c.prototype.FallbackList=[];c.prototype.Store=function(a,c){b.call(this,"Store",a,c)};c.prototype.Retrieve=function(a){return b.call(this,"Retrieve",a)};c.prototype.Exists=function(a){return b.call(this,"Exists",a)};void 0===window.jQuery?window.PersistentBrowserObject=c:window.jQuery.PersistentBrowserObject=c})(); (function(){var a;a=void 0===window.jQuery?window.PersistentBrowserObject:jQuery.PersistentBrowserObject;a.Storage={};a.Storage.localStorage={};a.Storage.localStorage.Store=function(b,a){localStorage[b]=JSON.stringify(a)};a.Storage.localStorage.Retrieve=function(b){return JSON.parse(localStorage[b])};a.Storage.localStorage.Exists=function(b){return void 0!==localStorage[b]};a.Storage.localStorage.Supported=function(){return void 0!==window.localStorage&&void 0!==window.JSON};a.Storage.sessionStorage= {};a.Storage.sessionStorage.Store=function(b,a){sessionStorage[b]=JSON.stringify(a)};a.Storage.sessionStorage.Retrieve=function(b){return JSON.parse(sessionStorage[b])};a.Storage.sessionStorage.Exists=function(b){return void 0!==sessionStorage[b]};a.Storage.sessionStorage.Supported=function(){return void 0!==window.sessionStorage&&void 0!==window.JSON};var c={};a.Storage.Memory={};a.Storage.Memory.Store=function(b,a){c[b]=JSON.stringify(a)};a.Storage.Memory.Retrieve=function(b){return JSON.parse(c[b])}; a.Storage.Memory.Exists=function(b){return void 0!==c[b]};a.Storage.Memory.Supported=function(){return void 0!==window.JSON};a.Storage.Memory.Clear=function(){};a.Storage.Cookie={};a.Storage.Cookie.Store=function(b,a){document.cookie=encodeURIComponent(b)+"="+encodeURIComponent(JSON.stringify(a))};a.Storage.Cookie.Retrieve=function(b){b=encodeURIComponent(b)+"=";var a=document.cookie.indexOf(b),c=document.cookie.indexOf(";",a);-1==c&&(c=document.cookie.length);return JSON.parse(decodeURIComponent(document.cookie.substring(a+ b.length,c)))};a.Storage.Cookie.Exists=function(a){a=encodeURIComponent(a)+"=";return-1<document.cookie.indexOf(a)};a.Storage.Cookie.Supported=function(){return void 0!==document&&void 0!==document.cookie&&void 0!==window.JSON};a.prototype.FallbackList[a.prototype.FallbackList.length]=a.Storage.localStorage})();
